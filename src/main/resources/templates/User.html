<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User</title>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://bootswatch.com/4/spacelab/bootstrap.min.css">

    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even){background-color: #f2f2f2}

        th {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body>



            <div class="container">

                    <div id="div1">

                <form action="#" th:action="@{/user/all}" th:object="${user}" method="POST">

                    <fieldset>
                        <legend >
                            <div th:switch="${user.id}">
                                <p th:case="null">User create</p>
                                <p th:case="${user.id}">User Update</p>

                            </div>
                        </legend>
                        <div class="form-group row">
                            <input type="hidden" class="form-control"  th:field="*{id}" >

                            <div class="col-md-2">
                            <label >First Name :</label>
                            </div>

                            <div class="col-md-4">

                                <input type="text" class="form-control" th:field="*{firstname}" aria-describedby="emailHelp" placeholder="First Name" th:value="${user.firstname}">
                                <p th:if="${#fields.hasErrors('firstname')}" th:errors="*{firstname}">Name Error</p>
                            </div>


                            <div class="col-md-2">
                                <label >Last Name :</label>
                            </div>

                            <div class="col-md-4">
                                <input type="text" class="form-control" th:field="*{lastname}" aria-describedby="emailHelp" placeholder="Last Name" >
                                <p th:if="${#fields.hasErrors('lastname')}" th:errors="*{lastname}">Name Error</p>
                            </div>
                        </div>



                        <div class="form-group row">

                            <div class="col-md-2">
                                <label >Age :</label>
                            </div>

                            <div class="col-md-4">
                                <input type="number" class="form-control" th:field="*{age}" aria-describedby="emailHelp" placeholder="Age">
                                <p th:if="${#fields.hasErrors('age')}" th:errors="*{age}">Age Error</p>
                            </div>


                            <div class="col-md-2">
                                <label >Email address :</label>
                            </div>

                            <div class="col-md-4">
                                <input type="email" class="form-control" th:field="*{email}" aria-describedby="emailHelp" placeholder="Email">
                                <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Email Error</p>
                            </div>
                        </div>
                        <div th:switch="${user.id}">

                            <p th:case="null">
                                <button type="submit" class="btn btn-primary btn-md">Create</button>
                            </p>


                            <p th:case="${user.id}">
                                <button type="submit" class="btn btn-primary btn-md">Update</button>
                                <button href="/user/add" class="btn btn-danger btn-md" >Cancel</button>
                            </p>

                        </div>

                    </fieldset>



                </form>

                    </div>

<div class="row">



                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th scope="col">Id</th>
                        <th scope="col">First Name</th>
                        <th scope="col">Last Name</th>
                        <th scope="col">Age</th>
                        <th scope="col">E mail</th>
                        <th> </th>

                    </tr>
                    </thead>
                    <tbody><th:block th:each="user : ${userdata}">
                        <tr>
                            <td th:text="${user.id}">...</td>
                            <td th:text="${user.firstname}">...</td>
                            <td th:text="${user.lastname}">...</td>
                            <td th:text="${user.age}">...</td>
                            <td th:text="${user.email}">...</td>

                         <td>  <button type="button" class="btn btn-primary  btn-sm" th:onclick="'window.location.href=\'/user/all/' + ${user.id} + '\''"> update</button>
                                <button  type="button" class="btn btn-danger  btn-sm" th:onclick="'window.location.href=\'/user/delete/' + ${user.id} + '\''"> Delete</button>
                         </td>


                        </tr>
                        <tr>

                        </tr>
                    </th:block>
                    </tbody>




                </table>
</div>
            </div>

</body>
</html>